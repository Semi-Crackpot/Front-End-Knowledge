# 作用域链

### 什么是自由变量
- 在当前作用域中使用，却没有在该作用域中声明的变量，就是该作用域的自由变量
  ```js
  var x = 10;
  function fn() {
    console.log(x); // x就是fn函数的作用域的自由变量
  }
  ```

### 什么是作用域链？
1.  在函数的当前作用域中查找变量，如果找到了就结束
2.  没找到的话，就到创建该函数（作用域）的作用域中查找这个自由变量，找到的话就结束
3.  没找到的话，再继续往上找，直到找到全局作用域为止，如果全局作用域中都没有，就结束
4.  这个一步一步往上找的路线，就叫做作用域链
- 以下面的代码为例
  ```js
  var a = 10;
  function fn() {
    var b = 20;
    function bar() {
      console.log(a + b); // 30
    }
    return bar;
  }
  var x = fn();
  var b = 200;
  x();
  ```
  1.  a和b，都是函数bar的作用域中的自由变量
  2.  当寻找b自由变量时，到创建bar函数的作用域中找，即在fn函数的作用域中，b=20，结束
  3.  当寻找a自由变量时，因为fn函数中没有，就继续往上找到全局作用域，即在全局作用域中，a=10，结束

### 