# 配置模板引擎

### 配置模板引擎的过程
1.  安装EJS模板引擎：``cnpm i ejs --save``
2.  在入口文件``main.ts``中，配置视图文件所在目录以及使用的模板引擎
    ```ts
    // 配置视图文件的根目录为views
    app.setBaseViewsDir('views');
    // 配置使用的模板引擎为ejs
    app.setViewEngine('ejs');

### 使用模板引擎
1.  在views目录下，创建两个文件夹，``admin``存放后台页面，``default``存放前台页面，在文件夹内创建ejs模板文件
2.  在控制器文件中，使用模板文件渲染路由页面
    ```ts
    @Get()
    // 使用Render装饰器进行渲染，参数 default/index 对应 views/default/index.ejs 模板文件
    @Render('default/index')
    // 因为路由方法必须返回一个对象，可以设置返回值类型为any
    getHello(): any {
        // 使用模板引擎后，路由方法必须返回一个对象，该对象可以直接在模板文件中使用
        return {'name': 'zhangsan'};
    }
3.  在模板文件``default/index.ejs``中，使用路由方法返回的对象{'name': 'zhangsan'}
    ```html
    <body>
        <h2>我是模板引擎</h2>
        <!-- 注意要使用模板语法 -->
        <%= name %>
    </body>

### 使用模板引擎，实现表单提交
1.  在模板文件``index.ejs``中，创建表单
    ```html
    <!-- action是表单要提交到的路由，method采用post方法提交表单数据 -->
    <form action="/doSomething" method="post">
        <input type="text" name="username" placeholder="请输入用户名">
        <br>
        <br>
        <input type="text" name="password" placeholder="请输入密码">
        <input type="submit" value="提交">
    </form>
2.  在控制器中，渲染该模板文件
    ```ts
    @Get()
    @Render('default/index')
    getHello(): any {
        return {'name': 'zhangsan'};
    }
3.  设置表单数据提交到的路由
    ```ts
    // 因为表单提交采用Post方法，路由方法也必须使用Post装饰器
    @Post('doSomething')
    doSomething(@Body() body) {
        // 打印表单提交的数据，打印结果是一个对象
        console.log(body);
    }

### 