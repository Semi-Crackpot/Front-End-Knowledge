# 流

### 导入fs模块
    ```js
    const fs = require('fs')
    ```

### 以流的方式读取数据
    ```js
    // 创建读取流，指定要读取的文件
    const readStream = fs.createReadStream('./data.txt')
    var count = 0
    var str = ''
    // 监听读取流，data是文件中读取到的数据
    readStream.on('data', (data) => {
        str += data;
        count++;
    })
    // 监听读取流的结束
    readStream.on('end', () => {
        console.log(str);
        console.log(count);
    })
    // 监听读取流的错误
    readStream.on('erorr', (err) => {
        console.log(err);
    })
    ```

### 以流的方式写入数据
    ```js
    // 创建要写入的数据
    var str = ''
    for (let i = 0; i < 500; i++) {
        str += '我是新数据\n'
    }
    // 创建写入流，指定要写入的文件
    var writeStream = fs.createWriteStream('./data.txt')
    // 写入数据
    writeStream.write(str)
    // 标记写入的完成
    writeStream.end()
    // 监听写入的完成，必须先标记，后监听
    writeStream.on('finish', () => {
        console.log('写入完成');
    })
    ```

### 管道流：从一处读取数据，写入到另一处
    ```js
    // 从一个文件创建读取流
    var readStream = fs.createReadStream('./data.txt')
    // 在另一个文件创建写入流
    var writeStream = fs.createWriteStream('./index.html')
    // 进行管道流
    readStream.pipe(writeStream)
    ```

### 管道流还可以实现文件（图片、压缩包等）的复制
    ```js
    var readStream = fs.createReadStream('./a.jpg')
    var writeStream = fs.createWriteStream('./images/a.jpg')
    readStream.pipe(writeStream)
    ```

### 