# HTTPS

### 什么是HTTPS？
- HTTP通常承载于TCP之上，在HTTP和TCP之间添加一个安全协议层，就成了HTTPS

### 密码学基础
1.  明文：未被加密过的原始数据
2.  密文：明文被某种加密算法加密之后，会变成密文，从而确保原始数据的安全
3.  密钥：
    - 密钥是一种参数，它是在明文转换为密文或将密文转换为明文的算法中输入的参数
    - 密钥分为对称密钥与非对称密钥，分别应用在对称加密和非对称加密上

### 对称加密是什么？
1.  对称加密指：信息的发送方和接收方使用同一个密钥去加密和解密数据
2.  特点：算法公开、加密和解密速度快，适合于对大数据量进行加密
3.  加密过程：明文 + 加密算法 + 密钥 = 密文
4.  解密过程：密文 + 加密算法 + 密钥 = 明文
5.  缺点：由于对称加密的算法是公开的，所以一旦密钥被泄露，那么密文就很容易被破解

### 非对称加密是什么？
1.  非对称加密指：使用一对密钥进行加密，即公钥和私钥，私钥自己保存，公钥公开
2.  被公钥加密过的密文只能被私钥解密，被私钥加密过的密文只能被公钥解密
3.  缺点：加密和解密花费时间长、速度慢，只适合对少量数据进行加密

### 为什么HTTPS更安全？
1.  HTTPS对传输的数据进行加密
2.  在网络请求中，需要有很多服务器、路由器的转发，其中的节点都可能篡改信息，而使用HTTPS，密钥在终点站才有

### HTTP和HTTPS的区别是什么？
1.  HTTP的默认端口是80，HTTPS的默认端口是443
2.  HTTP传输采用明文不加密的方式；HTTPS传输采用密钥加密的方式 
3.  HTTP不验证通信方身份，无法验证报文完整性
4.  而HTTPS是HTTP + 加密处理 + 认证 + 完整性保护

### HTTPS的通信过程
1.  HTTPS协议 = HTTP协议 + SSL/TLS协议
2.  在HTTPS数据传输的过程中，需要用SSL/TLS对数据进行加密和解密，需要用HTTP对加密后的数据进行传输
3.  HTTPS为了兼顾安全与效率，同时使用了对称加密和非对称加密
4.  对数据进行对称加密，而对称加密所要使用的密钥通过非对称加密传输到服务器端

### HTTPS请求的过程
- HTTPS请求包含了两次HTTP传输
1. 客户端向服务器发起HTTPS请求，连接到服务器的443端口
2. 服务器端有一个密钥对，即公钥和私钥，用来非对称加密
3. 服务器将公钥发送给客户端，自己保存私钥
4. 客户端收到服务器端的公钥之后，会对公钥进行检查，验证其合法性，然后生成一个用于对称加密的密钥，即客户端密钥。
5. 客户端用服务器的公钥对客户端密钥进行非对称加密，这样客户端密钥就变成了密文，至此，第一次HTTP请求结束。
5. 客户端发起第二个HTTP请求，将加密之后的客户端密钥发送给服务器。
6. 服务器接收到客户端发来的密文之后，会用自己的私钥对其进行非对称解密，解密之后的明文就是客户端密钥，然后用客户端密钥对数据进行对称加密，这样数据就变成了密文。
7. 然后服务器将加密后的密文发送给客户端。
8. 客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。
整个HTTPS传输完成。

### 